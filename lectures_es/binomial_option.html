<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Espen Sirnes">
<meta name="dcterms.date" content="2025-03-24">

<title>1 - Binomial options</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="binomial_option_files/libs/clipboard/clipboard.min.js"></script>
<script src="binomial_option_files/libs/quarto-html/quarto.js"></script>
<script src="binomial_option_files/libs/quarto-html/popper.min.js"></script>
<script src="binomial_option_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="binomial_option_files/libs/quarto-html/anchor.min.js"></script>
<link href="binomial_option_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="binomial_option_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="binomial_option_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="binomial_option_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="binomial_option_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="binomial_option.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="binomial_option.ipynb" download="binomial_option.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1 - Binomial options</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Espen Sirnes </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>An option is a right but not an obligation to buy or sell an asset for a certain price. Options can be used for both hedging as well as speculation.</p>
<p>Options are a type of derivatives. A derivative is an asset where the price is determined completely by other assets, such as the share price of a company. Hence the value of a derivative is a function of the asset’s value. This is the case for options too: If you know the value of the share, you can immediately determine the exercise value of the option.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/optionvalue.png" class="img-fluid figure-img"></p>
<figcaption>Option Value</figcaption>
</figure>
</div>
<p>The cash flow from an option</p>
<p>There are mainly two types of options - put and call options. A call option gives you the right to buy one share at a fixed price sometime in the future. Let us say that the price agreed upon for an Equinor share is 100. This is called the strike price or exercise price. If the share price is 110 today, you can take advantage of your right to buy it for 100 and sell it in the market for 110. The value of the option is then 10.</p>
<p>However, if the market price is 90, it would be pointless to buy the stock for 100. Since you do not have any obligation to buy it, you would not exercise your right since that would lead to a certain loss. Therefore, the option price can never be negative, since the right to buy will never be exercised if it leads to a loss. Hence, if C is the value of the call, S the value of the stock, and X the strike price at the terminal date, we have</p>
<p><span id="eq-C"><span class="math display">\[
C = \max(S - X, 0)
\tag{1}\]</span></span></p>
<p>The share price is 110 option holder is thus left with <span id="eq-C_gain"><span class="math display">\[
= \max(110-100, 0) = 10
\tag{2}\]</span></span> But if the price falls to 90, the option loses its entire value <span id="eq-C_loss"><span class="math display">\[
= \max(90-100, 0) = 10
\tag{3}\]</span></span></p>
<p>Let us draw this up in a chart where X is the strike price, with a python function giving the maximum betseen the current share price and <span class="math inline">\(S-X\)</span></p>
<div id="cell-fig-call_option" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> <span class="dv">100</span>  <span class="co"># strike price</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the cash flow</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_canvas(title):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    S <span class="op">=</span> np.linspace(<span class="dv">80</span>, <span class="dv">120</span>, <span class="dv">100</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create figure and axis objects</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the call option payoff</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    ax.axvline(X, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f"Strike Price (X=</span><span class="sc">{</span>X<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Labels and title</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Stock Price (S)"</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"Payoff"</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    ax.set_title(title)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ax, S  <span class="co"># Return figure, axis, and stock price</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>ax, S <span class="op">=</span> create_canvas(<span class="st">"Cash Flow of a Call Option"</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>call_payoff <span class="op">=</span> np.maximum(S <span class="op">-</span> X, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>ax.plot(S, call_payoff, label<span class="op">=</span><span class="st">"Call Option Payoff"</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-call_option" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-call_option-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="binomial_option_files/figure-html/fig-call_option-output-1.png" width="672" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-call_option-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Call option cash flow
</figcaption>
</figure>
</div>
</div>
</div>
<p>Such drawings of the cash flow are called profit charts.</p>
<p>We have now examined how a call option works. A put option, on the other hand, is the right but not the obligation to sell an asset at a specified price. This means the option holder benefits from a falling share price and receives the difference between the market price S and the strike price X when the market price is lower than X. If the price is higher, the option has no value, and the owner gains nothing.</p>
<p>This is illustrated in <a href="#fig-put_option" class="quarto-xref">Figure&nbsp;2</a>. To represent the put option, we simply modify the function from <code>np.maximum(S - X, 0)</code> to <code>np.maximum(X - S, 0)</code>, reflecting the fact that the option gains value when the stock price decreases.</p>
<div id="cell-fig-put_option" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ax, S <span class="op">=</span> create_canvas(<span class="st">"Cash Flow of a Put Option"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>put_payoff <span class="op">=</span> np.maximum(X <span class="op">-</span> S, <span class="dv">0</span>) <span class="co">#put option payoff</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>ax.plot(S, put_payoff, label<span class="op">=</span><span class="st">"Put Option Payoff"</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-put_option" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-put_option-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="binomial_option_files/figure-html/fig-put_option-output-1.png" width="672" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-put_option-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Put option cash flow
</figcaption>
</figure>
</div>
</div>
</div>
<p>Thus, we see that the immediate exercise value of an option is the difference between the share price and the exercise price X. In the case of a put option, there is no payment when the share price is greater than X, while for a call option, the option is worthless when the stock price is lower than X.</p>
<section id="important-concepts" class="level1">
<h1>Important Concepts</h1>
<p>In general, it is never advantageous to exercise an option early, before the expiration date. This is because an option always has some value beyond its immediate exercise value, as there is always a chance it will become more valuable. This is due to a principle known as “<em>Jensen’s Inequality</em>”. It states that the mean of a convex function is always higher than the function of the mean.</p>
<p>This is illustrated in <a href="#fig-jensen" class="quarto-xref">Figure&nbsp;3</a>. Here, we see that if the stock price can take two values, 85 and 115, the option value at the mean of these two points is zero, since this corresponds to the exercise price. However, if we take the mean of the call function values, it is the average of 15 and 0, which equals 7.5. Hence, the mean of a convex function is higher than the function at the mean.</p>
<div id="cell-fig-jensen" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ax, S <span class="op">=</span> create_canvas(<span class="st">"Jensens inequality"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>call_payoff <span class="op">=</span> np.maximum(S <span class="op">-</span> X, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ax.plot(S, call_payoff, label<span class="op">=</span><span class="st">"Call Option Payoff"</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate two stock prices, one to the left and one to the right of the strike price</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>S_left <span class="op">=</span> X <span class="op">-</span> <span class="dv">15</span>  <span class="co"># 15 units below strike price</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>S_right <span class="op">=</span> X <span class="op">+</span> <span class="dv">15</span>  <span class="co"># 15 units above strike price</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute corresponding payoffs</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>payoff_left <span class="op">=</span> np.maximum(S_left<span class="op">-</span>X, <span class="dv">0</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>payoff_right <span class="op">=</span> np.maximum(S_right <span class="op">-</span> X, <span class="dv">0</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute mean stock price and corresponding mean payoff</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>S_mean <span class="op">=</span> (S_left <span class="op">+</span> S_right) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>payoff_mean <span class="op">=</span> (payoff_left <span class="op">+</span> payoff_right) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Add scatter points illustrating the two sample payoffs</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>ax.scatter([S_left, S_right], [payoff_left, payoff_right], color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">"Sampled Payoffs"</span>, zorder<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw a line between the two points to indicate the mean of payoffs</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>ax.plot([S_left, S_right], [payoff_left, payoff_right], color<span class="op">=</span><span class="st">'blue'</span>, linestyle<span class="op">=</span><span class="st">'dashed'</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter point for the payoff at the mean stock price</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>ax.scatter(S_mean, payoff_mean, color<span class="op">=</span><span class="st">'blue'</span>, marker<span class="op">=</span><span class="st">'X'</span>, label<span class="op">=</span><span class="st">"Mean of call payoff"</span>, zorder<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>ax.scatter(S_mean, <span class="dv">0</span>, color<span class="op">=</span><span class="st">'red'</span>, marker<span class="op">=</span><span class="st">'X'</span>, label<span class="op">=</span><span class="st">"Call payoff of mean"</span>, zorder<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Annotate points</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean <span class="op">-</span> <span class="dv">1</span>, payoff_mean, <span class="st">"E[call_payoff(S)]"</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean <span class="op">+</span> <span class="fl">0.7</span>, <span class="fl">1.6</span>, <span class="st">"{"</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">92</span>, color<span class="op">=</span><span class="st">'grey'</span>, fontweight<span class="op">=</span><span class="st">'ultralight'</span>, fontname<span class="op">=</span><span class="st">"serif"</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean <span class="op">-</span> <span class="dv">3</span>, <span class="fl">2.5</span>, <span class="st">"Intrinsic value"</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean <span class="op">+</span> <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="st">"call_payoff(E[S])"</span>, ha<span class="op">=</span><span class="st">'left'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Show updated plot</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>ax.legend()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-jensen" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-jensen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="binomial_option_files/figure-html/fig-jensen-output-1.png" width="672" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-jensen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Jensens inequality illustrated by a call option
</figcaption>
</figure>
</div>
</div>
</div>
<p>This means that if there is a long time until the expiration date, an option will still have some value, even if the price is lower than the exercise price, because there is always a possibility that the option will become profitable before it expires. As a result, the value of an option is higher before the expiration date than at the expiration date.</p>
<p>The value of a call option before expiration is denoted as <span class="math inline">\(C_t\)</span>, while the value of a put option is denoted as <span class="math inline">\(P_t\)</span>. Sometimes, it is useful to have a general symbol for the option price, regardless of whether it is a put or a call. In such cases, the general value of an option or derivative is represented as <span class="math inline">\(f_t\)</span>. The stock price is denoted as <span class="math inline">\(S_t\)</span>, and the exercise price is <span class="math inline">\(X\)</span> (exercise value). The variable <span class="math inline">\(t\)</span> represents the time since the option was issued, measured in years. For example, if the option was issued three months ago, then <span class="math inline">\(t = \frac{1}{4}\)</span>.</p>
<p>The buyer has the right to exercise the option for a limited period. The time when the option expires is called the expiration date and is represented by capital <span class="math inline">\(T\)</span>. If the option lasts for one year, then <span class="math inline">\(T = 1\)</span>. The exercise values of the options at expiration are denoted as <span class="math inline">\(C_T\)</span> or <span class="math inline">\(P_T\)</span>.</p>
</section>
<section id="black-and-scholes" class="level1">
<h1>Black and Scholes</h1>
<p>There exists a method to directly calculate the value of options. We will not go into details now, but a formula was discovered by <span class="citation" data-cites="scholes1973pricing">[@scholes1973pricing]</span> and <span class="citation" data-cites="merton1971theory">[@merton1971theory]</span>. However, it later turned out that their discovery was very similar to earlier work by <span class="citation" data-cites="bachelier1900">[@bachelier1900]</span>. In short, the option value is the present value of the expected cash flow from the option, assuming that the underlying asset earns a risk-free interest rate. The Black and Scholes option price is calculated in <a href="#fig-bs" class="quarto-xref">Figure&nbsp;4</a>.</p>
<div id="cell-fig-bs" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>ax, S <span class="op">=</span> create_canvas(<span class="st">"Black &amp; Scholes price"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>call_payoff <span class="op">=</span> np.maximum(S <span class="op">-</span> X, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>ax.plot(S, call_payoff, label<span class="op">=</span><span class="st">"Call Option Payoff"</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> black_scholes_call(S, X, T, r, sigma):</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    d1 <span class="op">=</span> (np.log(S <span class="op">/</span> X) <span class="op">+</span> (r <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> sigma<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> T) <span class="op">/</span> (sigma <span class="op">*</span> np.sqrt(T))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> sigma <span class="op">*</span> np.sqrt(T)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> S <span class="op">*</span> norm.cdf(d1) <span class="op">-</span> X <span class="op">*</span> np.exp(<span class="op">-</span>r <span class="op">*</span> T) <span class="op">*</span> norm.cdf(d2)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean<span class="op">+</span><span class="fl">0.7</span>, <span class="fl">1.6</span> , <span class="st">"{"</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">92</span>, color<span class="op">=</span><span class="st">'grey'</span>,     fontweight<span class="op">=</span><span class="st">'ultralight'</span>, fontname<span class="op">=</span><span class="st">"serif"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean<span class="op">-</span><span class="dv">3</span>, <span class="fl">2.5</span> , <span class="st">"Intrinsic value"</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean<span class="op">+</span><span class="dv">2</span>, payoff_mean<span class="op">+</span><span class="dv">3</span> , <span class="st">"$C_t$"</span>, ha<span class="op">=</span><span class="st">'left'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>ax.text(S_mean<span class="op">+</span><span class="dv">2</span>, <span class="dv">4</span> , <span class="st">"$C_T$"</span>, ha<span class="op">=</span><span class="st">'left'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>ax.plot(S,black_scholes_call(S, X, <span class="fl">0.25</span>, <span class="fl">0.05</span>, <span class="fl">0.37</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-bs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="binomial_option_files/figure-html/fig-bs-output-1.png" width="659" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Call option and Black&amp;Scholes option price
</figcaption>
</figure>
</div>
</div>
</div>
<p><strong><em>Problem:</em></strong> * Change the Black and Scholes figure to show a put option. The formula for the Black and Scholes put is <span id="eq-bs_put"><span class="math display">\[
P(S, X, T, r, \sigma) = X e^{-rT} \Phi(-d_2) - S \Phi(-d_1)
\tag{4}\]</span></span> where: where <span id="eq-bs_put"><span class="math display">\[
d_1 = \frac{\ln(S / X) + \left(r + \frac{1}{2} \sigma^2 \right)T}{\sigma \sqrt{T}}
\tag{5}\]</span></span> and <span id="eq-bs_put"><span class="math display">\[
d_2 = d_1 - \sigma \sqrt{T}
\tag{6}\]</span></span></p>
<p><span class="math inline">\(\Phi\)</span> is the cumulative standard normal distribution function.</p>
</section>
<section id="european-and-american-options" class="level1">
<h1>European and American options</h1>
<p>Sometimes an option can be exercised at any time up to the terminal date. We therefore distinguish between two types of options:</p>
<ul>
<li><strong>American option</strong>: The option holder can choose whether to exercise the option at any time before the terminal date.</li>
<li><strong>European option</strong>: The option can only be exercised on the terminal date.</li>
</ul>
<p>In addition to buying options, investors may also sell options short in the market, a process known as issuing options. In this case, the cash flow will be the exact opposite of what the buyer receives, as illustrated below. The buyer (owner) receives the same cash flow as previously shown, while the seller has an obligation rather than a right. Therefore, the issuer’s cash flow is a mirror image of the buyer’s.</p>
</section>
<section id="put-call-parity" class="level1">
<h1>Put-call parity</h1>
<p>As you may have noticed, a put option always provides a payout when a call option does not (and vice versa), assuming the strike price is the same. By combining both types of options, an investor can create a cash flow proportional to the share price, regardless of how the share price changes. This relationship between a put, a call, and the share price is known as <strong>put-call parity</strong>:</p>
<p><span id="eq-put_call_parity"><span class="math display">\[
S_{t} - NPV_{t}(X) = C_{t} - P_{t}
\tag{7}\]</span></span></p>
<p>Where <span class="math inline">\(NPV_{t}(X)\)</span> is the present value at time <span class="math inline">\(t\)</span>. As we see, this formula applies at any time, including before the terminal date <span class="math inline">\(T\)</span>.</p>
<p>In the figure below, we see the cash flow for a call option (<span class="math inline">\(+C_t\)</span>) and an issued put (<span class="math inline">\(-P_t\)</span>) plotted. The dotted line represents the combined value of these two positions, that is, the value of <span class="math inline">\(C_t - P_t\)</span>, along with the stock price <span class="math inline">\(S\)</span> itself.</p>
<p>If the date is before the terminal date, we use the present value of the exercise price at that time, <span class="math inline">\(NPV_{t}(X)\)</span>. However, for now, we assume the terminal exercise price <span class="math inline">\(X\)</span> that has been used throughout.</p>
<p>The call-put and <span class="math inline">\(S - X\)</span> positions in <a href="#fig-put_call_par" class="quarto-xref">Figure&nbsp;5</a> are shifted up and down by 1 to make all lines visible.</p>
<div id="cell-fig-put_call_par" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ax, S <span class="op">=</span> create_canvas(<span class="st">"Put-call parity"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>call_payoff <span class="op">=</span> np.maximum(S <span class="op">-</span> X, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>put_payoff <span class="op">=</span> np.maximum(X<span class="op">-</span>S, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>ax.plot(S, call_payoff, label<span class="op">=</span><span class="st">"Call Option Payoff"</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>ax.plot(S, <span class="op">-</span>put_payoff, label<span class="op">=</span><span class="st">"Put Option Payoff"</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>ax.plot(S, call_payoff<span class="op">-</span>put_payoff <span class="op">+</span> <span class="dv">1</span>, label<span class="op">=</span><span class="st">"$C_t-P_t$ Payoff"</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>ax.plot(S, S<span class="op">-</span>X <span class="op">-</span> <span class="dv">1</span>, label<span class="op">=</span><span class="st">"$S-X$ Payoff"</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>ax.legend()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-put_call_par" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-put_call_par-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="binomial_option_files/figure-html/fig-put_call_par-output-1.png" width="670" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-put_call_par-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Put-call parity
</figcaption>
</figure>
</div>
</div>
</div>
<p>The minus sign before the put option means that we hold it <em>short</em>. This means that we sell it. In financial markets, we do not need to own an asset to sell it. Instead, we can <em>short</em> it, which involves borrowing the asset and later returning it.</p>
<p>For example, we may borrow a stock for three months, sell it in the market, and hope that its price decreases before we buy it back to return it. Shorting means that we hold a negative amount of the asset and are speculating on a price decrease.</p>
<p>For options, short selling can also mean <em>issuing</em> the option. Most online brokers allow traders to sell options without owning them first, provided that they post some collateral. This effectively means that the trader issues the option.</p>
</section>
<section id="combining-options" class="level1">
<h1>Combining options</h1>
<p>By combining a put and a call, it is possible to replicate the cash flows of buying a share and taking out a loan. Additionally, one can buy and sell puts and calls with different exercise prices to create customized cash flows at different share prices.</p>
<p>In <a href="#fig-issue_call_put" class="quarto-xref">Figure&nbsp;6</a>, we have plotted the net cash flow from issuing both a call option (call) and a put option (put).</p>
<div id="cell-fig-issue_call_put" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ax, S <span class="op">=</span> create_canvas(<span class="st">"Issuing a call and put"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>call_payoff <span class="op">=</span> np.maximum(S <span class="op">-</span> X, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>put_payoff <span class="op">=</span> np.maximum(X<span class="op">-</span>S, <span class="dv">0</span>) <span class="co">#call option payoff</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>ax.plot(S, <span class="op">-</span>call_payoff<span class="op">-</span>put_payoff<span class="op">+</span><span class="dv">8</span>, label<span class="op">=</span><span class="st">"Issued call and put"</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>ax.legend()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-issue_call_put" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-issue_call_put-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="binomial_option_files/figure-html/fig-issue_call_put-output-1.png" width="683" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-issue_call_put-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Issued call and put
</figcaption>
</figure>
</div>
</div>
</div>
<p>As you can see, the options are slightly shifted up compared to how we have drawn them before. The reason for this is that we have now included the sales price of the options (the intrinsic value), which varies depending on the share price at the time. In this example, the share price is higher than the exercise price.</p>
<p>Since we have taken the intrinsic value of the option into account, we see that the option will provide a cash flow as long as the stock price is between a and b. This combination can therefore be used to bet that the price of a stock will remain within a certain range. For example, if one expects Telenor’s share price to be exactly 100 in six months, one could issue a put and a call between 95 and 105.</p>
<p>Similarly, options can be used to bet that the price will deviate from a specific target, either positively or negatively. You can draw the cash flow for this case yourself. The only limit to the cash flows that can be created with options is one’s imagination.</p>
<p><strong><em>Problem:</em></strong><br>
Try different combinations of call and put options, including those with different exercise values, to create sophisticated cash flows.</p>
</section>
<section id="pricing-of-options" class="level1">
<h1>Pricing of options</h1>
<p>So, how much is an option worth? The relationship between an option’s value and the underlying stock price allows for a formula that determines the value of the right the option represents. This formula was discovered in the early 1970s and is known as the Black and Scholes option-pricing formula.</p>
<p>This is one of the most useful inventions in finance and is used daily in global financial markets. The economists who developed the formula were awarded the Nobel Prize in 1997 for their work. We will return to the Black and Scholes formula later. First, we will explore how to price an option in a simplified world where the stock price can only move up or down.</p>
</section>
<section id="pricing-of-binomial-options" class="level1">
<h1>Pricing of binomial options</h1>
<p>We will now consider a simplified scenario where the share price can take only two values in the future. For example, assume that the Telenor share may either rise to 115 or fall to 95 from its current price of 100 kroner. The interest rate is 5%.</p>
<p>Further, assume that we need to determine the price of a call option with an exercise price of 105. This means that the owner has the right to receive 10 if the stock price rises, but nothing otherwise. Graphically, the problem can be represented as follows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/binom_opt.png" class="img-fluid figure-img"></p>
<figcaption>Option Value</figcaption>
</figure>
</div>
<p>The task is to determine the current option price, denoted as <span class="math inline">\(f_0\)</span> in the figure above. We use <span class="math inline">\(f_0\)</span> instead of <span class="math inline">\(c_0\)</span> because we aim to develop a general pricing method that applies to both put and call options. In fact, this method can be used to price any derivative.</p>
<p>The key to solving this problem is recognizing that the same cash flow can be replicated by borrowing money to finance a fraction of the shares that the option delivers, regardless of whether the price goes up or down. The reason this replication is possible is that an option’s value is a function of the stock price. When the stock is worth 115, the option will always be worth 10. When the stock is worth 95, the option is always worthless. By substituting the stock price into this function, we can determine the value of the option.</p>
<p>Now, suppose we borrow money to purchase a certain number of shares per option, denoted by <span class="math inline">\(\Delta\)</span>. For example, if we buy half as many shares as options, then <span class="math inline">\(\Delta = \frac{1}{2}\)</span>. Since the stock price is 100, we buy shares worth:</p>
<p><span class="math inline">\(100 \cdot \Delta = 50\)</span> per option.</p>
<p>After half a year (<span class="math inline">\(T = \frac{1}{2}\)</span>), we must repay the loan with interest, so the total repayment amount will be:</p>
<p><span class="math inline">\(100 \cdot 1.05^{\frac{1}{2}} \cdot \Delta\)</span>.</p>
<p>If the share price rises, our account balance will show a surplus of:</p>
<p><span id="eq-cf_up"><span class="math display">\[
Δ ∙ (115 - 100 ∙ 1.05^½)
\tag{8}\]</span></span></p>
<p>Similarly, we receive 10 on the option if the stock price goes up. If we buy the option for <span class="math inline">\(f_0\)</span> today and fund it with a loan equal amount <span class="math inline">\(f_0\)</span>, we will next year have:</p>
<p><span id="eq-cf_down"><span class="math display">\[
10 - f_0 ∙ 1.05^½
\tag{9}\]</span></span></p>
<p>We can now select an appropriate proportion of shares Δ so that these two transactions provide identical cash flows. This means that we can find a fraction of shares Δ so that the leveraged purchase of Δ shares give the same return as a similar purchase of the option by solving the equation: <span id="eq-no_arbitrage"><span class="math display">\[
Δ ∙ (115 - 100 ∙ 1.05^½) = 10 - f_0 ∙ 1.05^½
\tag{10}\]</span></span></p>
<p>for Δ. If the stock goes down, we can reason in exactly the same way. We get a loss of</p>
<p><span class="math inline">\(Δ ∙ (95 - 100 ∙ 1.05^{\frac{1}{2}})\)</span></p>
<p>on the share and a loss of</p>
<p><span class="math inline">\(0 - f_0 ∙ 1.05^{\frac{1}{2}}\)</span></p>
<p>on the option. We require that the investments should provide the same return, so we can set an equality between them:</p>
<p><span class="math inline">\(Δ ∙ (95 - 100 ∙ 1.05^{\frac{1}{2}}) = 0 - f_0 ∙ 1.05^{\frac{1}{2}}\)</span></p>
<p>We now have two relatively simple equations with two unknowns, Δ and <span class="math inline">\(f_0\)</span>. Solving these equations, we find that</p>
<p><span class="math inline">\(Δ = \frac{1}{2}\)</span></p>
<p>and</p>
<p><span class="math inline">\(f_0 ≈ 3.645\)</span>.</p>
<p>What we have done is find a combination of loans and equity investments that produce the same return as an equivalent position in the option. This is the fundamental principle behind all option pricing.</p>
<p>Thus, it is possible to achieve the same cash flows as the option by holding a fraction Δ of the share. This principle applies generally—an option can always be replicated by holding a portion of the stock. In fact, many banks profit by issuing options and hedging them through this replication strategy.</p>
</section>
<section id="a-general-binomial-formula" class="level1">
<h1>A general binomial formula</h1>
<p>When the stock and option can only take two values, we call this the binomial option pricing model. While we could use the method above to calculate the option price every time, it is much easier to apply a more general formula. Let us introduce the following notation:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 42%">
<col style="width: 15%">
<col style="width: 19%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Today</strong></th>
<th><strong>Stock up</strong></th>
<th><strong>Stock down</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>The share price</strong></td>
<td><span class="math inline">\(S_0\)</span></td>
<td><span class="math inline">\(S_u\)</span></td>
<td><span class="math inline">\(S_d\)</span></td>
</tr>
<tr class="even">
<td><strong>Option Value</strong></td>
<td><span class="math inline">\(f_0\)</span></td>
<td><span class="math inline">\(f_u\)</span></td>
<td><span class="math inline">\(f_d\)</span></td>
</tr>
<tr class="odd">
<td><strong>Price Ratio</strong> <span class="math inline">\(S_T/S_0\)</span></td>
<td></td>
<td><span class="math inline">\(u = S_u/S_0\)</span></td>
<td><span class="math inline">\(d = S_d/S_0\)</span></td>
</tr>
</tbody>
</table>
<p>Here, the subscripts <em>u</em> and <em>d</em> represent the up and down movements of the stock, respectively. We use a general variable <span class="math inline">\(f\)</span> that can stand for both a put (<span class="math inline">\(P\)</span>) and a call option (<span class="math inline">\(C\)</span>). Additionally, we define two variables, <span class="math inline">\(u\)</span> and <span class="math inline">\(d\)</span>, which represent the relative movement of the stock price when it increases or decreases.</p>
<p>For example, consider a put option with a strike price <span class="math inline">\(X = 105\)</span>, where the stock can either rise to <span class="math inline">\(S_u = 115\)</span> or fall to <span class="math inline">\(S_d = 95\)</span>. In this case, we have:</p>
<ul>
<li><span class="math inline">\(f_u = 0\)</span></li>
<li><span class="math inline">\(f_d = 10\)</span></li>
<li><span class="math inline">\(u = 1.15\)</span></li>
<li><span class="math inline">\(d = 0.95\)</span></li>
</ul>
<p>Now, instead of using specific numbers, we generalize the approach from the previous section to find <span class="math inline">\(f_0\)</span>.</p>
<p>As before, the investor buys Δ shares and borrows <span class="math inline">\(Δ ∙ S_0\)</span> to finance the purchase. Taking interest into account, the investor must repay</p>
<p><span class="math inline">\(Δ ∙ S_0 ∙ (1 + r)^T\)</span></p>
<p>after one year. If the stock price rises, the investor can sell the stock for <span class="math inline">\(S_u\)</span> in the market. The resulting profit will be:</p>
<p><span id="eq-up_sol"><span class="math display">\[
Δ∙(S_u - S_0 ∙(1+r)^T)
\tag{11}\]</span></span></p>
<p>This should match the profit gained from financing the option purchase with a loan. The option provides a payoff of <span class="math inline">\(f_u\)</span> when the stock price rises. The loan that must be repaid consists of the initial purchase price plus interest, which is:</p>
<p><span class="math inline">\(f_0 ∙ (1 + r)^T\)</span></p>
<p>Thus, the profit from the leveraged option purchase is:</p>
<p><span id="eq-up_f"><span class="math display">\[
f_u - f_0∙(1+r)^T
\tag{12}\]</span></span> As before, we choose now a share of shares so that the profits of shares and option price match. That is, we find a Δ such that: <span id="eq-up_equation"><span class="math display">\[
Δ∙(S_u - S_0 ∙(1+r)^T) = f_u - f_0∙(1+r)^T
\tag{13}\]</span></span></p>
<p>Exactly the same argument applies if the stock goes down, so in that case we need only replace subscript u with d:</p>
<p><span id="eq-up_equation"><span class="math display">\[
Δ∙(S_d - S_0 ∙(1+r)^T) = f_d - f_0∙(1+r)^T
\tag{14}\]</span></span></p>
</section>
<section id="risk-neutral-probability" class="level1">
<h1>Risk-neutral probability</h1>
<p>As in the previous section, we have two unknowns: the proportion of Δ shares and the option price <span class="math inline">\(f\)</span>, which can be easily solved. We will not go into the full derivation of the solution here. However, it turns out that the solution can be expressed in a relatively simple way using a variable <span class="math inline">\(q\)</span>, known as the “risk-neutral probability.” It is calculated as:</p>
<p><span id="eq-q_formula"><span class="math display">\[
q=\frac{(1+r)^T-d}{u-d}
\tag{15}\]</span></span></p>
<p><span class="math inline">\(q\)</span> is really just a tool for calculating the option price and is not actually a probability. However, it shares a key property with real probabilities in that it always lies between zero and one. We use it to compute an expectation in the same way as we do with normal probabilities.</p>
<p>It is called “risk-neutral” because if we apply it to the terminal values of the underlying stock (<span class="math inline">\(S_u\)</span> and <span class="math inline">\(S_d\)</span>), the expected value equals the current stock price plus interest:</p>
<p><span id="eq-q_expectation"><span class="math display">\[
\mathbb{E}_q[S_T] = S_u \cdot q + S_d \cdot (1-q) = S_0 \cdot (1+r)^T
\tag{16}\]</span></span></p>
<p>Once we find <span class="math inline">\(q\)</span>, the option price is simply given as the present value of the expected option value at exercise, where we use the risk-neutral probability <span class="math inline">\(q\)</span> as the probability of “up” and “down”.</p>
<p>The option price today is therefore:</p>
<p><span id="eq-gen_formula"><span class="math display">\[
f_0=\frac{q \cdot f_u + (1-q) \cdot f_d}{(1+r)^T}
\tag{17}\]</span></span></p>
<p>We have discounted the expected value because <span class="math inline">\(f_u\)</span> and <span class="math inline">\(f_d\)</span> are not present cash flows but represent cash flows at the terminal time <span class="math inline">\(T\)</span>.</p>
<p>The process for calculating the price of a binomial option is as follows:</p>
<ol type="1">
<li>Calculate <span class="math inline">\(u\)</span> and <span class="math inline">\(d\)</span></li>
<li>Calculate the risk-neutral probability <span class="math inline">\(q\)</span> (Equation 13.2)</li>
<li>Calculate the present value of the expected option value using probability <span class="math inline">\(q\)</span> (Equation 13.3)</li>
</ol>
<p>Although we primarily use the risk-neutral probability to calculate simple binomial options, this method is actually remarkably general and can be used to determine prices for all types of derivatives—financial securities whose value depends on shares or other underlying assets. In general, the price of any derivative can be determined by defining a risk-neutral probability distribution.</p>
<p>Another important quantity is <span class="math inline">\(\Delta\)</span>, which represents the number of shares needed to replicate an option. It turns out that the delta is:</p>
<p><span id="eq-gen_delta_formula"><span class="math display">\[
\Delta=\frac{S_u-S_d}{f_u-f_d}
\tag{18}\]</span></span></p>
<p>The Δ is useful because it indicates how many shares you must buy to replicate the option. Since holding more shares increases risk, delta also serves as a measure of the risk inherent in the option.</p>
</section>
<section id="what-are-options" class="level1">
<h1>What are options?</h1>
<p>One of the most important properties of options is that they allow investors to place large bets in the market with relatively little capital. In our example, we saw that the purchase of an option only cost 3.64. However, if the share price increased, the option’s value would triple to 10! To achieve the same gain in value by buying stock directly, one would need to purchase approximately 0.42 shares, which would require an investment of:</p>
<p><span class="math inline">\(0.42 \times 100 = 42\)</span></p>
<p>instead of just 3.64.</p>
<p>For investors with limited liquidity, options offer a significant advantage over directly buying shares. Recall how we derived the option price by comparing purchasing an option to buying a stock. An option can be thought of as a “package” consisting of a stock and a loan equal to the exercise price, where the stock is only sold if the net value is zero. Options provide a powerful way to leverage investments, and the leverage increases the further an option is from being profitable (“out of the money”). In our example, the investor could increase their exposure equivalent to:</p>
<p><span class="math inline">\(100 / 3.645 \approx 27\)</span> shares</p>
<p>for the price of just one share by buying more options.</p>
<p>On the other hand, this also means the risk increases significantly. If the option expires worthless, the entire investment is lost. Therefore, investors should be very cautious about allocating too much of their portfolio to options.</p>
<p>Options are commonly used in employee compensation schemes, particularly for middle and top management. By issuing stock options, companies provide management with strong incentives to increase the company’s value and, in turn, its share price—without significantly diluting shareholders’ interests today. However, in some cases, options have created excessive short-term incentives, leading to decisions that prioritize immediate gains over long-term company growth.</p>
</section>
<section id="multi-period-options" class="level1">
<h1>Multi-Period Options</h1>
<p>It is not very realistic to assume that stock prices can only take two values in the future. In reality, stocks can be traded at many different price levels. It is therefore more reasonable to treat stock prices as a continuous variable. The binomial model can be improved by allowing for more than two price movements. One way to achieve this is by constructing a <strong>binomial tree</strong> that links multiple binomial models together.</p>
<p>For example, if the stock price reaches 120, it could represent the case where the price has increased for eight consecutive periods. By breaking down the last period in the tree into seven pairs (each sharing the last node with a neighbor), we create seven binomial options. Calculating the price in period six for each of these options gives us the value of all nodes in period six.</p>
<p>We can then continue solving for the option values in period five, and so on, until we determine the option value at period zero.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>